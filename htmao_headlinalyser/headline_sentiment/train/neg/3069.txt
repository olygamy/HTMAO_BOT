California, battered by global warmingâ€™s weather whiplash, is fighting to stop it